<!doctype html>
<meta charset=utf-8>
<title>minimal file upload with jquery</title>
<script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
<script src="jquery-ajax-progress.js"></script>
<input type=file id=file onchange=show() />
<button onclick=upload()>save</button>
<input type=progress id=progress>
<br>
<script>
function show(){
    var file = $("#file")[0].files[0]
    var reader  = new FileReader();
    $('br').after('<img>')
    reader.onloadend = function () {
        $('img')[0].src = reader.result;
    }
    if (file) {
      reader.readAsDataURL(file);
    } else {
      $('img')[0].src = "";
    }    
}
function upload(){
    var formData = new FormData();
    formData.append('files', $("#file")[0].files[0])
    $.ajax({
      url: "upload.php",
      processData: false,
      type: "POST",
      contentType: false,
      data: formData,
      progress: function (e) {
        if (e.lengthComputable) {
          console.log(e.loaded / e.total * 100 + '%')
          $('#progress').val(e.loaded / e.total * 100);
        }
      }
    });
}
</script>



